<v-app id="inspire">
  <v-app-bar app dense flat>
    <v-btn icon @click="toggleTheme">
      <v-icon v-text="`$logo`" color="blue" />
    </v-btn>
    <v-toolbar-title class="pl-0">ParFlow Sandtank</v-toolbar-title>
    <v-spacer />
    <parflow-config-editor v-show="showJobParams" style="flex: none" />
    <v-spacer />

    <div>
      <v-tooltip bottom>
        <template v-slot:activator="{ on }">
          <v-btn v-on="on" icon @click="toggleJobParameter">
            <v-icon v-text="`$jobParameters`" />
          </v-btn>
        </template>
        <span>Toggle job parameters</span>
      </v-tooltip>
    </div>

    <div class="mr-4">
      <v-tooltip bottom>
        <template v-slot:activator="{ on }">
          <v-btn v-on="on" class="mx-2" icon @click="toggleMode">
            <v-icon v-text="`$settings`" />
          </v-btn>
        </template>
        <span v-show="showVisualization">Edit materials</span>
        <span v-show="showMaterialEdit">Show visualization</span>
      </v-tooltip>
    </div>

    <v-select
      v-model="isLake"
      :items="[{ text: 'Lake', value: 1}, { text: 'River', value: 0}]"
      dense
      hide-details
      class="mr-4"
      style="max-width: 100px;"
    />

    <v-layout class="mr-4" style="max-width: 54px; text-align: right">
      <v-icon v-text="`$time`" />
      <div style="min-width: 30px;">
        {{ time }}
      </div>
    </v-layout>

    <v-btn
      outlined
      @click="runParflow"
      :disabled="busy || !connected"
      class="ml-2"
    >
      <v-progress-circular
        v-show="busy"
        size="20"
        width="2"
        indeterminate
        color="primary"
        class="mr-2"
        style="width: 30px;"
      />
      <v-icon
        v-show="!busy"
        v-text="`$ready`"
        class="mr-2"
        style="width: 30px;"
      />
      Next
    </v-btn>
    <v-btn icon small @click="aboutDialog = !aboutDialog" class="ml-3">
      <v-icon v-text="`$help`" />
    </v-btn>

    <v-progress-linear
      :active="pvwBusy"
      absolute
      bottom
      color="light-blue"
      height="4"
      indeterminate
    />
  </v-app-bar>
  <v-content>
    <v-container class="fill-height" fluid>
      <visualization v-show="connected && showVisualization" />
      <material-editor v-show="connected && showMaterialEdit" />
    </v-container>
  </v-content>
  <!-- about dialog -->
  <v-dialog v-model="aboutDialog" max-width="50%">
    <about @close="aboutDialog = false" />
  </v-dialog>
</v-app>
