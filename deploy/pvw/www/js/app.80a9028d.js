(function(t){function e(e){for(var a,s,o=e[0],l=e[1],c=e[2],f=0,d=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(a=!1)}a&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},i={app:0},r=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(n,a,function(e){return t[e]}.bind(null,a));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"047a":function(t,e,n){t.exports=n.p+"img/clay.0e361f27.jpg"},1917:function(t,e,n){"use strict";var a=n("a56b"),i=n.n(a);e["default"]=i.a},"1fff":function(t,e,n){"use strict";var a=n("b51b"),i=n.n(a);e["default"]=i.a},2212:function(t,e,n){t.exports=n.p+"img/logo-igwmc.aa51d0dd.png"},"264f":function(t,e,n){t.exports=n.p+"img/sand.e10f025c.jpg"},"32b7":function(t,e,n){t.exports={container:"style_container_3JET7",water:"style_water_1R2cj",value:"style_value_2OHyR"}},"499d":function(t,e,n){"use strict";var a=n("7301"),i=n.n(a);e["default"]=i.a},"4c30":function(t,e,n){t.exports=n.p+"img/gravel.f25f48b3.jpg"},5108:function(t,e,n){t.exports=n.p+"img/logo-mines.90004bda.jpg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("130f");var a=n("2b0e"),i=n("2f62"),r=n("ce5b"),s=n.n(r),o=(n("d4b8"),n("bf40"),n("5363"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"inspire"}},[n("v-app-bar",{staticStyle:{"z-index":"100"},attrs:{app:"",dense:"",flat:""}},[n("v-btn",{attrs:{icon:""},on:{click:t.toggleTheme}},[n("v-icon",{attrs:{color:"blue"},domProps:{textContent:t._s("$logo")}})],1),n("v-toolbar-title",{staticClass:"pl-0"},[t._v("ParFlow Sandtank")]),n("v-spacer"),n("v-select",{staticClass:"mx-4",staticStyle:{"max-width":"100px"},attrs:{items:[{text:"Lake",value:1},{text:"River",value:0}],dense:"","hide-details":""},model:{value:t.isLake,callback:function(e){t.isLake=e},expression:"isLake"}}),n("v-spacer"),n("v-layout",{staticClass:"mr-4",staticStyle:{"max-width":"54px","text-align":"right"}},[n("v-icon",{domProps:{textContent:t._s("$time")}}),n("div",{staticStyle:{"min-width":"30px"}},[t._v(" "+t._s(t.time)+" ")])],1),n("v-btn",{staticClass:"ml-2",attrs:{outlined:"",disabled:t.busy||!t.connected},on:{click:t.runParflow}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:t.busy,expression:"busy"}],staticClass:"mr-2",staticStyle:{width:"30px"},attrs:{size:"20",width:"2",indeterminate:"",color:"primary"}}),n("v-icon",{directives:[{name:"show",rawName:"v-show",value:!t.busy,expression:"!busy"}],staticClass:"mr-2",staticStyle:{width:"30px"},domProps:{textContent:t._s("$ready")}}),t._v(" Run ")],1),n("v-btn",{staticClass:"ml-2",attrs:{outlined:"",disabled:t.busy||t.pvwBusy||!t.connected},on:{click:t.resetSimulation}},[t._v(" Reset ")]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({staticClass:"ml-3",attrs:{icon:"",small:""},on:{click:function(e){t.aboutDialog=!t.aboutDialog}}},a),[n("v-icon",{domProps:{textContent:t._s("$about")}})],1)]}}])},[n("span",[t._v(t._s(t.informations))])]),n("v-progress-linear",{attrs:{active:t.pvwBusy,absolute:"",bottom:"",color:"light-blue",height:"4",indeterminate:""}})],1),n("v-content",[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-layout",{attrs:{column:""}},[n("visualization",{directives:[{name:"show",rawName:"v-show",value:t.connected,expression:"connected"}],attrs:{showOpacitySliders:t.advanced}}),n("v-btn",{staticStyle:{top:"2px",left:"2px"},attrs:{absolute:"",left:"",icon:""},on:{click:t.toggleAdvanced}},[n("v-icon",{domProps:{textContent:t._s("$settings")}})],1),t.help?n("v-btn",{staticStyle:{top:"2px",left:"42px"},attrs:{absolute:"",left:"",icon:""},on:{click:t.openHelp}},[n("v-icon",{domProps:{textContent:t._s("$help")}})],1):t._e(),n("material-editor",{directives:[{name:"show",rawName:"v-show",value:t.connected&&t.advanced,expression:"connected && advanced"}],attrs:{forceResize:t.advanced}}),n("v-spacer")],1)],1)],1),n("v-dialog",{attrs:{"max-width":"50%"},model:{value:t.aboutDialog,callback:function(e){t.aboutDialog=e},expression:"aboutDialog"}},[n("about",{on:{close:function(e){t.aboutDialog=!1}}})],1)],1)}),l=[],c=(n("a4d3"),n("99af"),n("4de4"),n("4160"),n("b0c0"),n("a9e3"),n("b680"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[n("v-layout",{attrs:{"align-center":"","d-flex":"","justify-space-between":""}},[n("div",[t._v(" HydroFrame Sandtank Educational Model")]),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("close")}}},[n("v-icon",{domProps:{textContent:t._s("$close")}})],1)],1)],1),n("hr"),n("v-card-text",[n("p",{staticClass:"body-1 pt-4"},[t._v(" The ParFlow Sandtank model is a free tool that allows users to interactively simulate and visualize groundwater movement through a virtual slice of the subsurface. The app is designed to teach hydrogeology concepts. Users can adjust groundwater levels, change subsurface properties, pump groundwater, add pollutants and watch the system respond in real time. ")]),n("p",{staticClass:"body-1 pt-4"},[t._v(" The ParFlow Sandtank can be used as a stand-alone tool or as a supplement to existing lessons that use physical sand tank models. Refer to the "),n("a",{attrs:{href:"https://www.hydroframe.org/sand-tank-user-manual"}},[t._v("User Manual")]),t._v(" and "),n("a",{attrs:{href:"https://www.hydroframe.org/lesson-plans"}},[t._v("Lesson Plan Video")]),t._v(" For more information and check out the "),n("a",{attrs:{href:"https://www.hydroframe.org/groundwater-education-tools"}},[t._v("HydroFrame Education")]),t._v(" page for additional groundwater education resources. ")]),n("p",{staticClass:"body-1 pt-4"},[n("a",{attrs:{href:"https://github.com/hydroframe/SandTank"}},[t._v("ParFlow Sandtank")]),t._v(" is an open-source web application designed by the "),n("a",{attrs:{href:"https://www.hydroframe.org/"}},[t._v("HydroFrame Team")]),t._v(" and developed by "),n("a",{attrs:{href:"https://www.kitware.com/"}},[t._v("Kitware")]),t._v(" to support increased accessibility and usability of hydrology tools for research and teaching. It uses "),n("a",{attrs:{href:"https://parflow.org/"}},[t._v("ParFlow")]),t._v(" for its simulation backend and "),n("a",{attrs:{href:"https://www.paraview.org"}},[t._v("ParaView")]),t._v(" for the data loading and processing. The communication infrastructure relies on the "),n("a",{attrs:{href:"http://www.paraview.org/web/"}},[t._v("ParaViewWeb")]),t._v(" framework. ")]),n("p",[n("b",[t._v("Acknowledgment:")]),t._v(" This material is based upon work supported by the Department of Energy under Award Number(s) DE-SC0019609 - Cloud/Web-based Advanced Modeling and Simulation Turnkey High-Performance Computing Environment for Surface and Subsurface Science and the US National Science Foundation Office of Advanced Cyberinfrastructure under Award number OAC-1835855. ")]),n("div",[n("v-layout",{class:t.$style.logoLine,attrs:{"align-center":"","justify-center":"",wrap:"","d-flex":""}},t._l(t.logos,(function(e,a){return n("img",{key:a,class:t.$style.logo,attrs:{src:e}})})),0),n("p",{staticClass:"mt-3 mb-0",staticStyle:{"text-align":"center"}},[t._v(" Â© "+t._s((new Date).getFullYear())+" - Kitware - The University of Arizona - IGWMC - Colorado School of Mines ")])],1)])],1)},f=[],d=n("9d19"),h=n.n(d),p=n("2212"),y=n.n(p),m=n("ef4d"),v=n.n(m),g=n("5108"),_=n.n(g),w={name:"About",data:function(){return{logos:[v.a,h.a,y.a,_.a]}}},b=w,S=n("1917"),O=n("2877");function A(t){this["$style"]=S["default"].locals||S["default"]}var T=Object(O["a"])(b,u,f,!1,A,null,null),x=T.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("material-table",{attrs:{indicators:t.indicators},on:{change:t.onPermeabilityChange}}),n("v-layout",{staticClass:"mt-4",style:t.maxTankHeightStyle,attrs:{"align-end":""}},[n("v-spacer"),n("div",{class:t.$style.container,style:t.containerStyle},t._l(t.domain.setup.indicators,(function(e){return n("material-layer",{key:e.key,class:t.$style.material,attrs:{scale:t.scale,size:t.size,indicatorMask:t.indicatorMask,texture:t.showSoil?t.getTexture(e.key):null,color:t.palette[e.key],indicatorValue:e.key,mask:t.mask}})})),1),n("v-spacer")],1),n("v-spacer")],1)},N=[],P=(n("d81d"),n("b5a9")),R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{style:{opacity:t.opacity},attrs:{width:t.size[0]*t.scale,height:t.size[1]*t.scale}})},k=[],C=(n("ace4"),n("d3b7"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("3835")),L=n("047a"),W=n.n(L),D=n("4c30"),j=n.n(D),M=n("ba7e"),$=n.n(M),F=n("264f"),I=n.n(F),z={clay:new Image,gravel:new Image,loam:new Image,sand:new Image};z.clay.src=W.a,z.gravel.src=j.a,z.loam.src=$.a,z.sand.src=I.a;var U={name:"MaterialLayer",props:{scale:{type:Number,default:14},size:{type:Array,default:function(){return[10,10]}},indicatorMask:{type:Uint8Array,default:null},texture:{type:String,default:null},color:{type:String,default:"#ccc"},indicatorValue:{type:Number,default:1},opacity:{type:Number,default:1},mask:{type:Object,default:null}},watch:{scale:function(){this.$nextTick(this.draw)},size:function(){this.$nextTick(this.draw)},indicatorMask:function(){this.$nextTick(this.draw)},texture:function(){this.$nextTick(this.draw)},color:function(){this.$nextTick(this.draw)},indicatorValue:function(){this.$nextTick(this.draw)},mask:function(){this.$nextTick(this.draw)}},methods:{draw:function(){var t=this;if(this.$el){var e=Object(C["a"])(this.size,2),n=e[0],a=e[1],i=this.$el.getContext("2d");if(this.color&&(i.fillStyle=this.color,i.fillRect(0,0,n*this.scale,a*this.scale)),this.texture){var r=z[this.texture];r.complete||this.listeningOn===this.texture||(this.listeningOn=this.texture,r.addEventListener("load",(function(){t.$nextTick(t.draw)})));for(var s=r.width,o=r.height,l=Math.ceil(n*this.scale/s),c=Math.ceil(a*this.scale/o),u=0;u<l;u++)for(var f=0;f<c;f++)i.drawImage(r,u*s,f*o)}var d=i.getImageData(0,0,n*this.scale,a*this.scale);if(this.indicatorMask){for(var h=0;h<a;h++)for(var p=0;p<n;p++)for(var y=this.indicatorMask[p+h*n]===this.indicatorValue?255:0,m=4*(p*this.scale+h*this.scale*n*this.scale),v=0;v<this.scale;v++)for(var g=0;g<this.scale;g++){var _=4*(g+v*n*this.scale);d.data[m+_+3]=y}i.putImageData(d,0,0)}if(this.mask){for(var w=this.mask,b=w.scale,S=w.array,O=n*this.scale,A=a*this.scale,T=0;T<A;T++)for(var x=Math.floor(T/A*a*b),E=0;E<O;E++){var N=Math.floor(E/O*n*b),P=N+x*n*b;0===S[P]&&(d.data[4*(E+T*O)+3]=0)}i.putImageData(d,0,0)}}}},mounted:function(){this.draw()}},K=U,H=Object(O["a"])(K,R,k,!1,null,null,null),B=H.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.table},[n("div",[n("v-switch",{directives:[{name:"show",rawName:"v-show",value:t.showSoilToggle,expression:"showSoilToggle"}],staticClass:"mt-0",attrs:{dense:"","hide-details":"",value:t.soilVisibility},on:{change:t.updateSoilVisibility}})],1),n("div",{staticClass:"text-center",class:t.$style.clay},[n("span",{class:t.$style.txtBg},[t._v("Clay")])]),n("div",{staticClass:"text-center",class:t.$style.loam},[n("span",{class:t.$style.txtBg},[t._v("Loam")])]),n("div",{staticClass:"text-center",class:t.$style.sand},[n("span",{class:t.$style.txtBg},[t._v("Sand")])]),n("div",{staticClass:"text-center",class:t.$style.gravel},[n("span",{class:t.$style.txtBg},[t._v("Gravel")])]),t._l(t.indicators,(function(e){return[n("div",{key:e.key,staticClass:"text-center",class:t.$style.small,style:"background: "+e.color},[t._v(" "+t._s(e.key)+" ")]),n("div",{key:"slider-"+e.key,class:t.$style.slider},[n("v-slider",{attrs:{dense:"","hide-details":"","thumb-label":"",value:e.value,min:.01,max:1,step:.01},on:{input:function(n){return t.updateIndicator(e.key,n)}}})],1)]}))],2)},G=[],Y={name:"MaterialTable",components:{},props:{indicators:{type:Array,default:function(){return[{key:1,color:"red",value:.5}]}},soilVisibility:{type:Boolean,default:!1},showSoilToggle:{type:Boolean,default:!1}},watch:{dark:function(t){document.documentElement.style.setProperty("--text-shadow-bg-color",t?"#000":"#fff"),document.documentElement.style.setProperty("--text-transparent-bg-color",t?"rgba(0,0,0,0.25)":"rgba(255,255,255,0.25)")}},computed:{dark:function(){return this.$vuetify.theme.dark}},methods:{updateIndicator:function(t,e){this.$emit("change",{key:t,value:e})},updateSoilVisibility:function(t){this.$emit("visibility",t)}}},J=Y,X=n("499d");function q(t){this["$style"]=X["default"].locals||X["default"]}var Z=Object(O["a"])(J,V,G,!1,q,null,null),Q=Z.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{style:{opacity:t.opacity},attrs:{width:t.width*t.scale,height:t.height*t.scale+t.offset}},[t._l(t.wells,(function(e,a){return n("circle",{key:"circle-"+a,attrs:{cx:e.position[0]*t.scale,cy:t.offset+t.height*t.scale-e.position[1]*t.scale,r:t.scale/2,stroke:t.color,"stroke-width":"4",fill:"none"}})})),t._l(t.wells,(function(e,a){return n("line",{key:"line-"+a,attrs:{x1:e.position[0]*t.scale,x2:e.position[0]*t.scale,y1:0,y2:t.offset+t.height*t.scale-e.position[1]*t.scale-t.scale/2,stroke:t.color,"stroke-width":t.scale/2}})})),t._l(t.pressures,(function(e,a){return 0===e.width?n("line",{key:"press-"+a,attrs:{x1:e.x*t.scale,x2:e.x*t.scale,y1:t.offset+t.height*t.scale-(e.y+.65)*t.scale,y2:t.offset+t.height*t.scale-(e.y+e.height)*t.scale,stroke:t.water,"stroke-width":t.scale/4}}):t._e()}))],2)},et=[],nt={name:"WellLayer",props:{size:{type:Array,default:function(){return[10,10]}},scale:{type:Number,default:600},wells:{type:Array,default:function(){return[]}},pressures:{type:Array,default:function(){return[]}},opacity:{type:Number,default:1},color:{type:String,default:"#333"},water:{type:String,default:"#03A9F4"},offset:{type:Number,default:20}},computed:{width:function(){return this.size[0]},height:function(){return this.size[1]}}},at=nt,it=Object(O["a"])(at,tt,et,!1,null,null,null),rt=it.exports;function st(t){return t<.1?"clay":t<.3?"loam":t<.7?"sand":"gravel"}function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct={name:"MaterialEditor",components:{MaterialLayer:B,MaterialTable:Q,WellLayer:rt},props:{forceResize:{type:Boolean,default:!1},palette:{type:Array,default:function(){return["#FFDB15","#D3B340","#826121","#ECE7CE","#CFC96C","#E98973","#E7D4C0","#35454C","#A4E8E0","#020301","#F3F5F9"]}}},data:function(){return{maxWidth:0,maxHeight:0,showSoil:!1}},computed:lt({},Object(i["c"])({domain:"SANDTANK_DOMAIN",indicatorMask:"SANDTANK_INDICATOR",jobConfig:"PARFLOW_JOB",permeabilityMap:"PARFLOW_K",mask:"SANDTANK_MASK"}),{size:function(){return this.domain?this.domain.dimensions.filter((function(t){return t>1})):[10,10]},containerStyle:function(){return{height:"".concat(this.size[1]*this.scale,"px"),width:"".concat(this.size[0]*this.scale,"px")}},maxTankHeightStyle:function(){return{maxHeight:"".concat(this.size[1]*this.scale,"px")}},scale:function(){var t=this.maxWidth/this.size[0],e=this.maxHeight/this.size[1];return Math.floor(Math.max(1,Math.min(t,e)))},indicators:function(){var t=this;return this.domain&&this.domain.setup&&this.domain.setup.indicators?this.domain.setup.indicators.map((function(e,n){var a=e.key;return{key:a,value:t.permeabilityMap[a],color:t.palette[n]}})):[]}}),watch:{domain:function(){this.$nextTick(this.onResize)},forceResize:function(){this.onResize()}},methods:lt({},Object(i["d"])({updatePermeabilityMap:"PARFLOW_K_SET"}),{onPermeabilityChange:function(t){var e=t.key,n=t.value;this.updatePermeabilityMap(Object(c["a"])({},e,n))},getTexture:function(t){return st(this.permeabilityMap[t])},updateVisibility:function(t){this.showSoil=t}}),created:function(){var t=this;this.onResize=Object(P["a"])((function(){var e=t.$el.getBoundingClientRect(),n=e.width,a=e.height;t.maxWidth=n,t.maxHeight=Math.max(a,window.innerHeight-250)}),200),window.addEventListener("resize",this.onResize)},mounted:function(){this.$nextTick(this.onResize)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)}},ut=ct,ft=n("92fd");function dt(t){this["$style"]=ft["default"].locals||ft["default"]}var ht=Object(O["a"])(ut,E,N,!1,dt,null,null),pt=ht.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"justify-space-between":"","align-center":""}},[n("div",{staticClass:"mr-4"},[t._v("Simulation length:")]),n("v-text-field",{class:t.$style.field,attrs:{type:"number",dense:"","hide-details":""},model:{value:t.runLength,callback:function(e){t.runLength=e},expression:"runLength"}}),n("v-switch",{class:t.$style.field,attrs:{label:"Reset",dense:"","hide-details":""},model:{value:t.runReset,callback:function(e){t.runReset=e},expression:"runReset"}})],1)},mt=[];function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _t={name:"ParflowConfigEditor",computed:gt({},Object(i["c"])({config:"PARFLOW_JOB"}),{runLength:{get:function(){return this.config.runLength},set:function(t){this.setJobLength(Number(t))}},runReset:{get:function(){return!!this.config.runReset},set:function(t){this.setReset(t)}}}),methods:gt({},Object(i["d"])({setReset:"PARFLOW_RESET_SET",setJobLength:"PARFLOW_RUN_LENGTH_SET"}))},wt=_t,bt=n("8c3d");function St(t){this["$style"]=bt["default"].locals||bt["default"]}var Ot=Object(O["a"])(wt,yt,mt,!1,St,null,null),At=Ot.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("v-layout",{style:t.maxTankHeightStyle,attrs:{"align-end":""}},[n("v-spacer"),n("vertical-slider",{attrs:{scale:t.scale,domainSize:t.size,width:t.sliderWidth,maxHeight:t.domain.setup.maxHeight,value:t.jobConfig.hLeft,position:"right"},on:{input:t.setLeftPressure}}),n("div",{class:t.$style.container,style:t.containerStyle},[n("still-water",{class:t.$style.stillWater,style:{opacity:t.opacityStillWater},attrs:{size:t.size,scale:t.scale,pressures:t.pressures}}),t._l(t.domain.setup.indicators,(function(e){return n("material-layer",{key:e.key,class:t.$style.material,attrs:{scale:t.scale,size:t.size,indicatorMask:t.indicatorMask,texture:t.getTexture(e.key),indicatorValue:e.key,opacity:t.opacitySoil,mask:t.mask}})})),n("saturation-layer",{class:t.$style.water,style:{opacity:t.fastWaterOpacity},attrs:{scale:t.scale,size:t.size,saturation:t.saturation,opacity:t.slowWaterOpacity,mask:t.mask}}),n("pollutant-layer",{class:t.$style.pollutant,style:{opacity:t.opacityPollutant},attrs:{scale:t.scale,size:t.size,concentration:t.concentration,maxConcentration:t.concentrationRange[1],color:"#ff0000"}}),n("well-layer",{class:t.$style.wells,attrs:{size:t.size,scale:t.scale,wells:t.domain.wells,pressures:t.pressures,opacity:t.opacityWells,color:"#444"}}),n("v-layout",t._l(t.domain.wells,(function(e){return n("well-control",{key:e.key,class:t.$style.wellControl,style:"left: "+e.position[0]/t.size[0]*(t.scale*t.size[0])+"px",attrs:{id:e.key,name:e.name,mode:t.getWellMode(e.key),canPump:t.canPump(e.key,e.position[0],e.position[1]),value:t.getWellValue(e.key),autoHide:t.autoHideControls,poluantColor:"#ff0000",delta:t.wellIncrement},on:{change:t.updateWell}})})),1)],2),n("vertical-slider",{attrs:{scale:t.scale,domainSize:t.size,width:t.sliderWidth,maxHeight:t.domain.setup.maxHeight,value:t.jobConfig.hRight,position:"left"},on:{input:t.setRightPressure}}),n("v-spacer")],1),n("v-layout",{staticStyle:{height:"50px"},attrs:{"align-center":""}},[n("v-slider",{directives:[{name:"show",rawName:"v-show",value:t.showOpacitySliders,expression:"showOpacitySliders"}],staticClass:"mx-4",attrs:{label:"Soil",min:"0",step:"0.01",max:"1","hide-details":""},model:{value:t.opacitySoil,callback:function(e){t.opacitySoil=e},expression:"opacitySoil"}}),n("v-slider",{directives:[{name:"show",rawName:"v-show",value:t.showOpacitySliders,expression:"showOpacitySliders"}],staticClass:"mx-4",attrs:{label:"Water",min:"0",step:"0.01",max:"1","hide-details":""},on:{start:function(e){t.adjustingWaterOpacity=!0},end:function(e){t.adjustingWaterOpacity=!1}},model:{value:t.opacityWater,callback:function(e){t.opacityWater=e},expression:"opacityWater"}}),n("v-slider",{directives:[{name:"show",rawName:"v-show",value:t.showOpacitySliders,expression:"showOpacitySliders"}],staticClass:"mx-4",attrs:{label:"Wells",min:"0",step:"0.01",max:"1","hide-details":""},model:{value:t.opacityWells,callback:function(e){t.opacityWells=e},expression:"opacityWells"}}),n("v-slider",{directives:[{name:"show",rawName:"v-show",value:t.showOpacitySliders,expression:"showOpacitySliders"}],staticClass:"mx-4",attrs:{label:"Still water",min:"0",step:"0.01",max:"1","hide-details":""},model:{value:t.opacityStillWater,callback:function(e){t.opacityStillWater=e},expression:"opacityStillWater"}}),n("v-slider",{directives:[{name:"show",rawName:"v-show",value:t.showOpacitySliders,expression:"showOpacitySliders"}],staticClass:"mx-4",attrs:{label:"Pollutant",min:"0",step:"0.01",max:"1","hide-details":""},model:{value:t.opacityPollutant,callback:function(e){t.opacityPollutant=e},expression:"opacityPollutant"}})],1)],1)},xt=[],Et=(n("2af1"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{attrs:{width:t.size[0]*t.scale,height:t.size[1]*t.scale}})}),Nt=[];n("cfc3");function Pt(t,e){if(t>0){var n=t+e;return n>255?255:n}return 0}var Rt={name:"PollutantLayer",props:{scale:{type:Number,default:14},size:{type:Array,default:function(){return[10,10]}},concentration:{type:Float32Array,default:null},maxConcentration:{type:Number,default:1},opacity:{type:Number,default:1},color:{type:String,default:"#1DE9B6"}},watch:{scale:function(){this.$nextTick(this.draw)},size:function(){this.$nextTick(this.draw)},concentration:function(){this.$nextTick(this.draw)},maxConcentration:function(){this.$nextTick(this.draw)},opacity:function(){this.$nextTick(this.draw)}},methods:{draw:function(){var t=Object(C["a"])(this.size,2),e=t[0],n=t[1],a=this.$el.getContext("2d");if(this.concentration){a.fillStyle=this.color,a.fillRect(0,0,e*this.scale,n*this.scale);for(var i=a.getImageData(0,0,e*this.scale,n*this.scale),r=this.opacity<.5?2*this.opacity:1,s=this.opacity>.5?2*(this.opacity-.5)*255:0,o=0;o<n;o++)for(var l=0;l<e;l++)for(var c=255*this.concentration[l+o*e]/this.maxConcentration,u=4*(l*this.scale+o*this.scale*e*this.scale),f=0;f<this.scale;f++)for(var d=0;d<this.scale;d++){var h=4*(d+f*e*this.scale);i.data[u+h+3]=Pt(c,s)*r}a.putImageData(i,0,0)}else a.clearRect(0,0,e*this.scale,n*this.scale)}},mounted:function(){this.draw()}},kt=Rt,Ct=Object(O["a"])(kt,Et,Nt,!1,null,null,null),Lt=Ct.exports,Wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{attrs:{width:t.size[0]*t.scale,height:t.size[1]*t.scale}})},Dt=[],jt=(n("cb29"),"#03A9F4"),Mt="#01579B",$t={name:"SaturationLayer",props:{scale:{type:Number,default:14},size:{type:Array,default:function(){return[10,10]}},saturation:{type:Uint8Array,default:null},opacity:{type:Number,default:1},mask:{type:Object,default:null}},watch:{scale:function(){this.$nextTick(this.draw)},size:function(){this.$nextTick(this.draw)},saturation:function(){this.$nextTick(this.draw)},opacity:function(){this.$nextTick(this.draw)},mask:function(){this.$nextTick(this.draw)}},methods:{draw:function(){var t=Object(C["a"])(this.size,2),e=t[0],n=t[1],a=this.$el.getContext("2d");if(this.saturation){a.fillStyle=jt,a.fillRect(0,0,e*this.scale,n*this.scale);for(var i=a.getImageData(0,0,e*this.scale,n*this.scale),r=0;r<n;r++)for(var s=0;s<e;s++)for(var o=this.saturation[s+r*e],l=4*(s*this.scale+r*this.scale*e*this.scale),c=0;c<this.scale;c++)for(var u=0;u<this.scale;u++){var f=4*(u+c*e*this.scale);i.data[l+f+3]=o*this.opacity}if(a.putImageData(i,0,0),this.mask){for(var d=this.mask,h=d.scale,p=d.array,y=e*this.scale,m=n*this.scale,v=0;v<m;v++)for(var g=Math.floor(v/m*n*h),_=0;_<y;_++){var w=Math.floor(_/y*e*h),b=w+g*e*h;0===p[b]&&(i.data[4*(_+v*y)+3]=0)}a.putImageData(i,0,0)}var S=new Float32Array(e);S.fill(0);for(var O=0;O<e;O++)for(var A=n;A>0;A--)255===this.saturation[O+A*e]&&(S[O]=A+1,O++,A=n);a.lineWidth=Math.round(this.scale/5),a.strokeStyle=Mt,a.beginPath(),a.moveTo(0,S[0]*this.scale);for(var T=0;T<e;T++)a.lineTo((T+.5)*this.scale,S[T]*this.scale);a.lineTo(e*this.scale,S[S.length-1]*this.scale),a.stroke()}else a.clearRect(0,0,e*this.scale,n*this.scale)}},mounted:function(){this.draw()}},Ft=$t,It=Object(O["a"])(Ft,Wt,Dt,!1,null,null,null),zt=It.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{style:{opacity:t.opacity},attrs:{width:t.width*t.scale,height:t.height*t.scale+t.offset}},t._l(t.pressures,(function(e,a){return e.width?n("rect",{key:"press-rect-"+a,attrs:{x:e.x*t.scale,y:t.offset+t.height*t.scale-(e.y+e.height)*t.scale,width:e.width*t.scale,height:e.height*t.scale,fill:t.water}}):t._e()})),0)},Kt=[],Ht={name:"StillWater",props:{size:{type:Array,default:function(){return[10,10]}},scale:{type:Number,default:600},pressures:{type:Array,default:function(){return[]}},opacity:{type:Number,default:1},water:{type:String,default:"#03A9F4"},offset:{type:Number,default:20}},computed:{width:function(){return this.size[0]},height:function(){return this.size[1]}}},Bt=Ht,Vt=Object(O["a"])(Bt,Ut,Kt,!1,null,null,null),Gt=Vt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.container,style:t.containerStyle,on:{mousedown:t.onMouseDown,mouseup:t.onMouseUp,mousemove:t.onMouseMove,mouseenter:t.onMouseEnter}},[n("div",{class:t.$style.water,style:t.waterStyle}),n("div",{class:t.$style.value},[t._v(t._s(t.height.toFixed(2)))]),n("v-tooltip",{attrs:{activator:t.$el,right:"right"==t.position,left:"left"==t.position}},[n("span",[t._v("Drag to change water level")])])],1)},Jt=[],Xt={name:"VerticalSlider",props:{position:{type:String,default:"left"},scale:{type:Number,default:14},domainSize:{type:Array,default:function(){return[10,10]}},maxHeight:{type:Number,default:14},value:{type:Number,default:30},width:{type:Number,default:20}},data:function(){return{height:this.value,containerBounds:null,dragging:!1}},watch:{value:function(t){this.height=Number(t)}},computed:{containerStyle:function(){var t="".concat(this.maxHeight*this.scale,"px");return{width:"".concat(this.width,"px"),height:t,minHeight:t,maxHeight:t}},waterStyle:function(){var t="".concat(this.height*this.scale,"px");return{height:t}}},methods:{onMouseDown:function(t){this.dragging=!0,this.onMouseMove(t)},onMouseUp:function(){this.dragging=!1,this.$emit("input",this.height)},onMouseMove:function(t){if(this.dragging){var e=this.containerBounds,n=e.top,a=e.height,i=t.clientY;this.height=(a-(i-n))/this.scale}},onMouseEnter:function(){this.containerBounds=this.$el.getBoundingClientRect()}},mounted:function(){this.containerBounds=this.$el.getBoundingClientRect()}},qt=Xt,Zt=n("a7ca");function Qt(t){this["$style"]=Zt["default"].locals||Zt["default"]}var te=Object(O["a"])(qt,Yt,Jt,!1,Qt,null,null),ee=te.exports,ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"py-4",style:t.containerStyle,attrs:{column:"","align-center":""},on:{mouseenter:t.onEnter,mouseleave:t.onLeave}},[n("div",{style:t.buttonStyle},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{small:"",icon:"",disabled:!t.canPump,color:"blue"},on:{click:function(e){return t.trigger(-1)}}},a),[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("$waterExtraction")}})],1)]}}])},[n("span",[t._v("Pump from well "+t._s(t.name))])])],1),n("div",{style:t.buttonStyle},[n("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{small:"",icon:""},on:{click:function(e){return t.trigger(0)}}},a),[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("$waterOff")}})],1)]}}])},[n("span",[t._v("Close well "+t._s(t.name))])])],1),n("div",{style:t.buttonStyle},[n("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-btn",t._g({attrs:{small:"",icon:"",color:t.poluantColor},on:{click:function(e){return t.trigger(1)}}},a),[n("v-icon",{attrs:{small:""},domProps:{textContent:t._s("$waterInjection")}})],1)]}}])},[n("span",[t._v("Inject into well "+t._s(t.name))])])],1),n("div",{class:t.$style.flux},[t._v(t._s(t.value))])])},ae=[],ie={name:"WellControl",props:{id:{type:String,default:""},mode:{type:Number,default:0},canPump:{type:Boolean,default:!0},delta:{type:Number,default:1},value:{type:Number,default:0},name:{type:String,default:null},activeColor:{type:String,default:"#03A9F4"},poluantColor:{type:String,default:"#1DE9B6"},autoHide:{type:Boolean,default:!1}},watch:{autoHide:function(t){t||this.isInside||(this.isInside=!0),t&&(this.isInside=!1)}},data:function(){return{isInside:!this.autoHide}},computed:{containerStyle:function(){return{zIndex:this.isInside?10:0}},buttonStyle:function(){return{opacity:this.isInside?1:0}}},methods:{color:function(t){return t===this.mode?this.activeColor:null},trigger:function(t){var e=this.id,n=this.delta,a=this.value,i=this.canPump;t<0&&!i&&a<=0||this.$emit("change",{well:e,value:t?a+n*t:0})},onEnter:function(){this.isInside=!0},onLeave:function(){this.isInside=!this.autoHide}}},re=ie,se=n("1fff");function oe(t){this["$style"]=se["default"].locals||se["default"]}var le=Object(O["a"])(re,ne,ae,!1,oe,null,null),ce=le.exports;function ue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var de={name:"Visualization",components:{MaterialLayer:B,PollutantLayer:Lt,SaturationLayer:zt,StillWater:Gt,VerticalSlider:ee,WellControl:ce,WellLayer:rt},props:{sliderWidth:{type:Number,default:80},controlOffset:{type:Number,default:150},showOpacitySliders:{type:Boolean,default:!1}},data:function(){return{opacityPollutant:.6,opacityStillWater:1,opacitySoil:1,opacityWater:.5,opacityWells:1,adjustingWaterOpacity:!1,maxWidth:0,maxHeight:0}},computed:fe({},Object(i["c"])({domain:"SANDTANK_DOMAIN",indicatorMask:"SANDTANK_INDICATOR",saturation:"SANDTANK_SATURATION",jobConfig:"PARFLOW_JOB",permeabilityMap:"PARFLOW_K",wellsMap:"PARFLOW_WELLS",mask:"SANDTANK_MASK",pressures:"SANDTANK_PRESSURES",concentrationRange:"SANDTANK_CONCENTRATION_RANGE",concentration:"SANDTANK_CONCENTRATION_ARRAY"}),{wellIncrement:function(){return this.domain&&this.domain.setup&&this.domain.setup.wellIncrement||1},size:function(){return this.domain?this.domain.dimensions.filter((function(t){return t>1})):[10,10]},containerStyle:function(){return{height:"".concat(this.size[1]*this.scale,"px"),width:"".concat(this.size[0]*this.scale,"px")}},maxTankHeightStyle:function(){return{minHeight:"".concat(Math.max(this.domain.setup.maxHeight*this.scale,this.size[1]*this.scale+this.controlOffset),"px"),maxHeight:"".concat(Math.max(this.domain.setup.maxHeight*this.scale,this.size[1]*this.scale+this.controlOffset),"px")}},slowWaterOpacity:function(){return this.adjustingWaterOpacity?1:this.opacityWater},fastWaterOpacity:function(){return this.adjustingWaterOpacity?this.opacityWater:1},scale:function(){var t=this.maxWidth/this.size[0],e=this.maxHeight/this.size[1];return Math.floor(Math.max(1,Math.min(t,e)))},minWellSpacing:function(){for(var t=1e3,e=1;e<this.domain.wells.length;e++){var n=this.domain.wells[e].position[0]-this.domain.wells[e-1].position[0];n<t&&(t=n)}return t-1},autoHideControls:function(){return this.minWellSpacing*this.scale<20}}),watch:{domain:function(){this.$nextTick(this.onResize)}},methods:fe({},Object(i["d"])({resetJob:"PARFLOW_RESET",setJobLength:"PARFLOW_RUN_LENGTH_SET",setLeftPressure:"PARFLOW_LEFT_PRESSURE_SET",setRightPressure:"PARFLOW_RIGHT_PRESSURE_SET",setTypeToLake:"PARFLOW_LAKE_SET",updateWell:"PARFLOW_WELL_SET"}),{getTexture:function(t){return st(this.permeabilityMap[t])},getWellMode:function(t){return Math.sign(this.wellsMap[t])},getWellValue:function(t){return this.wellsMap[t]},canPump:function(t,e,n){if(this.saturation){var a=this.saturation[e+n*this.size[0]];if(255===a)return!0}return this.wellsMap[t]<0&&this.updateWell({well:t,value:0}),!1}}),created:function(){var t=this;this.onResize=Object(P["a"])((function(){var e=t.$el.getBoundingClientRect(),n=e.width,a=e.height;t.maxWidth=n-2*t.sliderWidth-20,t.maxHeight=Math.max(a-t.controlOffset,window.innerHeight-250-t.controlOffset)}),200),window.addEventListener("resize",this.onResize)},mounted:function(){this.$nextTick(this.onResize)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)}},he=de;function pe(t){this["$style"]=ft["default"].locals||ft["default"]}var ye=Object(O["a"])(he,Tt,xt,!1,pe,null,null),me=ye.exports;function ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ve(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _e={name:"ParflowWeb",components:{About:x,MaterialEditor:pt,ParflowConfigEditor:At,Visualization:me},data:function(){return{aboutDialog:!1,advanced:!1}},computed:ge({},Object(i["c"])({help:"SANDTANK_HELP",busy:"PARFLOW_BUSY",connected:"PVW_CONNECTED",pvwBusy:"PVW_BUSY",parflowExecutionCount:"PARFLOW_EXEC_COUNT",flowMap:"SANDTANK_FLOW_MAP",storageMap:"SANDTANK_STORAGE_MAP",domain:"SANDTANK_DOMAIN",time:"SANDTANK_TIME",config:"PARFLOW_JOB"}),{storageUnits:function(){var t={};return this.domain&&this.domain.storages&&this.domain.storages.forEach((function(e){var n=e.name,a=e.unit;t[n]=a})),t},flowUnits:function(){var t={};return this.domain&&this.domain.flows&&this.domain.flows.forEach((function(e){var n=e.name,a=e.unit;t[n]=a})),t},isLake:{get:function(){return this.config.isLake},set:function(t){this.setTypeToLake(Number(t))}},informations:function(){return this.isLake?"Lake storage ".concat(this.storageMap.lake.toFixed(4)," ").concat(this.storageUnits.lake):"River flow ".concat(this.flowMap.river," ").concat(this.flowUnits.river)}}),methods:ge({},Object(i["d"])({setTypeToLake:"PARFLOW_LAKE_SET"}),{},Object(i["b"])({pvwConnect:"PVW_CONNECT",pvwDisconnect:"PVW_DISCONNECT",runParflow:"PARFLOW_RUN",resetSimulation:"SANDTANK_RESET",onExit:"PVW_EXIT"}),{toggleTheme:function(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark},toggleAdvanced:function(){this.advanced=!this.advanced},openHelp:function(){window.open(this.help,"_blank")}}),created:function(){this.pvwConnect(),window.addEventListener("beforeunload",this.onExit)},beforeDestroy:function(){this.onExit(),this.pvwDisconnect()}},we=_e,be=Object(O["a"])(we,o,l,!1,null,null,null),Se=be.exports,Oe=n("8a60"),Ae=n.n(Oe),Te=[{key:"n",action:"PARFLOW_RUN"}];function xe(t){Te.forEach((function(e){var n=e.key,a=e.action;Ae.a.bind(n,(function(e){e.preventDefault(),t.dispatch(a)}))}))}function Ee(){Te.forEach((function(t){var e=t.key;Ae.a.unbind(e)}))}var Ne={register:xe,unregister:Ee},Pe={theme:{dark:!0,themes:{dark:{primary:"#0288D1",accent:"#29B6F6",secondary:"#B3E5FC",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"},light:{primary:"#039BE5",accent:"#4FC3F7",secondary:"#26C6DA",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"}}},icons:{iconfont:"mdi",values:{logo:"mdi-water",about:"mdi-help-circle-outline",help:"mdi-lifebuoy",settings:"mdi-tune",jobParameters:"mdi-settings",ready:"mdi-autorenew",time:"mdi-clock-outline",waterOff:"mdi-close-circle",waterExtraction:"mdi-arrow-up-bold",waterInjection:"mdi-arrow-down-bold",rain:"mdi-weather-pouring",soil:"mdi-layers-triple"}}},Re=(n("96cf"),n("1da1")),ke=n("7c2c"),Ce=ke["a"].extractURLParameters(),Le={state:{busyCount:0,execCount:0,runLength:10,runReset:1,hLeft:30,hRight:30,isLake:0,k:{},wells:{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0}},getters:{PARFLOW_BUSY:function(t){return!!t.busyCount},PARFLOW_EXEC_COUNT:function(t){return t.execCount},PARFLOW_JOB:function(t,e){var n=e.PVW_RUN_ID;return{application:"parflow",runId:n,runLength:t.runLength,runReset:t.runReset,hLeft:t.hLeft,hRight:t.hRight,isLake:t.isLake,k:t.k,wells:t.wells}},PARFLOW_K:function(t){return t.k},PARFLOW_WELLS:function(t){return t.wells}},mutations:{PARFLOW_RESET_SET:function(t,e){t.runReset=e?1:0},PARFLOW_RUN_LENGTH_SET:function(t,e){t.runLength=e},PARFLOW_LEFT_PRESSURE_SET:function(t,e){t.hLeft=e},PARFLOW_RIGHT_PRESSURE_SET:function(t,e){t.hRight=e},PARFLOW_LAKE_SET:function(t,e){t.isLake=e?1:0},PARFLOW_WELL_SET:function(t,e){var n=e.well,a=e.value;t.wells=Object.assign({},t.wells,Object(c["a"])({},n,a))},PARFLOW_K_SET:function(t,e){t.k=Object.assign({},t.k,e)}},actions:{PARFLOW_RUN:function(){var t=Object(Re["a"])(regeneratorRuntime.mark((function t(e){var n,a,i,r,s,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,a=e.getters,i=e.dispatch,!n.busyCount){t.next=3;break}return t.abrupt("return");case 3:if(n.busyCount+=1,r=a.PARFLOW_JOB,s=r.application,o=r.runId,!r.runReset){t.next=9;break}return t.next=9,i("PVW_RESET");case 9:return t.next=11,i("PVW_CONFIG_UPDATE",r);case 11:return l=JSON.stringify({application:s,runId:o}),t.abrupt("return",new Promise((function(t,e){var a=new XMLHttpRequest;a.onreadystatechange=function(s){4===a.readyState&&(n.busyCount-=1,r.runReset?n.execCount=1:n.execCount+=1,200===a.status||0===a.status?(n.runReset=0,i("PARFLOW_RESET_WELLS"),t(JSON.parse(a.responseText))):e({xhr:a,e:s}))},Ce.dev?a.open("POST","http://localhost:9000/paraview/",!0):a.open("POST",window.SANDTANK_SESSION_MANAGER_URL,!0),a.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),a.responseType="text",a.send(l)})));case 13:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),PARFLOW_RESET_WELLS:function(t){var e=t.state,n=e.wells,a={};Object.keys(n).forEach((function(t){a[t]=0})),e.wells=a}}},We=(n("25f0"),n("3ca3"),n("ddb0"),n("2b3d"),n("f91f")),De=n("520e");function je(t){return{getServerState:function(){return t.call("parflow.sandtank.initialize",[])},reset:function(){return t.call("parflow.sandtank.reset",[])},getSolidMask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return t.call("parflow.sandtank.solid.mask",[e])},updateConfiguration:function(e){return t.call("parflow.sandtank.config.update",[e])},subscribeToSaturation:function(e){return t.subscribe("parflow.sandtank.saturation",e)},subscribeToIndicator:function(e){return t.subscribe("parflow.sandtank.indicator",e)},subscribeToPressures:function(e){return t.subscribe("parflow.sandtank.pressures",e)},subscribeToFlows:function(e){return t.subscribe("parflow.sandtank.flows",e)},subscribeToStorages:function(e){return t.subscribe("parflow.sandtank.storages",e)},subscribeToConcentration:function(e){return t.subscribe("parflow.sandtank.concentration",e)},unsubscribe:function(e){return t.unsubscribe(e)},onExit:function(){return t.call("parflow.sandtank.exit",[])}}}var Me=ke["a"].extractURLParameters();function $e(t){if(t.sessionURL&&!Me.dev){var e=new URL(t.sessionURL);return e.host=window.location.host,Object.assign({},t,{sessionURL:e.toString()})}return t}var Fe={state:{config:{application:"sandtank",sessionURL:Me.dev?"ws://localhost:1234/ws":null,name:"default",sessionManagerURL:window.SANDTANK_SESSION_MANAGER_URL},client:null,error:null,connected:!1,busyCount:0},getters:{PVW_CONNECTED:function(t){return t.connected},PVW_BUSY:function(t){return!!t.busyCount},PVW_RUN_ID:function(t){return Me.dev?"devrun":t.client&&t.client.getConfig().id}},mutations:{PVW_CONNECTED_SET:function(t,e){t.connected=e},PVW_CLIENT_SET:function(t,e){t.client=e},PVW_BUSY_COUNT_SET:function(t,e){t.busyCount=e},PVW_ERROR_SET:function(t,e){t.error=e}},actions:{PVW_CONNECT:function(t){var e=t.commit,n=t.state,a=t.dispatch;return De["a"].setSmartConnectClass(We["a"]),new Promise((function(t,i){var r=n.config,s=n.client;if(s&&s.isConnected()){try{s.disconnect()}catch(l){console.log(l)}e("PVW_CONNECTED_SET",!1)}var o=s;o||(o=De["a"].newInstance({configDecorator:$e}),o.setProtocols({Parflow:je})),o.onBusyChange((function(t){e("PVW_BUSY_COUNT_SET",t)})),o.beginBusy(),o.onConnectionError((function(t){var n=t&&t.response&&t.response.error||"Connection error";console.error(n),e("PVW_ERROR_SET",n),e("PVW_CONNECTED_SET",!1),console.log(t),i()})),o.onConnectionClose((function(t){var n=t&&t.response&&t.response.error||"Connection close";console.error(n),e("PVW_ERROR_SET",n),e("PVW_CONNECTED_SET",!1),console.log(t),i()})),o.connect(Object.assign({},r,Me)).then((function(n){e("PVW_CLIENT_SET",n),o.endBusy(),e("PVW_CONNECTED_SET",!0),n.getRemote().Parflow.subscribeToSaturation((function(t){var e=Object(C["a"])(t,1),n=e[0];a("SANDTANK_SATURATION_UPDATE",n)})),n.getRemote().Parflow.subscribeToIndicator((function(t){var e=Object(C["a"])(t,1),n=e[0];a("SANDTANK_INDICATOR_UPDATE",n)})),n.getRemote().Parflow.subscribeToPressures((function(t){var e=Object(C["a"])(t,1),n=e[0];a("SANDTANK_PRESSURES_UPDATE",n)})),n.getRemote().Parflow.subscribeToStorages((function(t){var e=Object(C["a"])(t,1),n=e[0];a("SANDTANK_STORAGES_UPDATE",n)})),n.getRemote().Parflow.subscribeToFlows((function(t){var e=Object(C["a"])(t,1),n=e[0];a("SANDTANK_FLOWS_UPDATE",n)})),n.getRemote().Parflow.subscribeToConcentration((function(t){var e=Object(C["a"])(t,1),n=e[0];a("SANDTANK_CONCENTRATION_UPDATE",n)})),n.getRemote().Parflow.getServerState().then((function(t){e("SANDTANK_DOMAIN_SET",t),e("PARFLOW_RUN_LENGTH_SET",t.setup.simulationLength),t.setup.indicators.forEach((function(t){var n=t.key,a=t.value;e("PARFLOW_K_SET",Object(c["a"])({},n,a))})),a("SANDTANK_RESET"),n.getRemote().Parflow.getSolidMask(10).then((function(t){a("SANDTANK_MASK_UPDATE",t)}))})).catch(console.error),t(n)})).catch((function(t){console.error(t),i()}))}))},PVW_DISCONNECT:function(t){var e=t.commit,n=t.state;return new Promise((function(t,a){var i=n.client;if(i&&i.isConnected()){try{i.disconnect(),t()}catch(r){console.log(r),a(r)}e("PVW_CONNECTED_SET",!1)}}))},PVW_RESET:function(){var t=Object(Re["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,t.abrupt("return",n.client.getRemote().Parflow.reset().catch(console.error));case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),PVW_CONFIG_UPDATE:function(){var t=Object(Re["a"])(regeneratorRuntime.mark((function t(e){var n,a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=i.length>1&&void 0!==i[1]?i[1]:null,t.abrupt("return",n.client.getRemote().Parflow.updateConfiguration(a).catch(console.error));case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),PVW_EXIT:function(t){var e=t.state;return e.client.getRemote().Parflow.onExit().catch(console.error)}}};function Ie(t){return new Promise((function(e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsArrayBuffer(t)}))}var ze={state:{indicatorArray:null,saturationArray:null,solidArray:null,solidScaling:1,time:0,flows:{},storages:{},pressures:{},concentrationArray:null,concentrationDataRange:[0,1],domain:{dimensions:[100,1,50],wells:[{name:"w1",position:[11,15]}],setup:{maxHeight:30}}},getters:{SANDTANK_HELP:function(t){return t.domain&&t.domain.help},SANDTANK_DOMAIN:function(t){return t.domain},SANDTANK_INDICATOR:function(t){return t.indicatorArray},SANDTANK_SATURATION:function(t){return t.saturationArray},SANDTANK_CONCENTRATION_RANGE:function(t){return t.concentrationDataRange},SANDTANK_CONCENTRATION_ARRAY:function(t){return t.concentrationArray},SANDTANK_TIME:function(t){return t.time},SANDTANK_MASK:function(t){return t.solidArray?{scale:t.solidScaling,array:t.solidArray}:null},SANDTANK_PRESSURES:function(t){if(!t.domain.pressures)return[];var e={};t.domain.pressures.forEach((function(t){var n=t.name,a=t.iRange,i=t.pressureCell;e[n]={x:a[0],width:a[1]-a[0],y:i[2]}}));var n=Object.keys(t.pressures).map((function(n){return Object.assign({},e[n],{height:t.pressures[n]})}));return n.filter((function(t){var e=t.height;return e>0}))},SANDTANK_FLOW_MAP:function(t){return t.flows},SANDTANK_STORAGE_MAP:function(t){return t.storages}},mutations:{SANDTANK_DOMAIN_SET:function(t,e){t.domain=e}},actions:{SANDTANK_INDICATOR_UPDATE:function(t,e){var n=t.state,a=e.array;Ie(a).then((function(t){n.indicatorArray=new Uint8Array(t)}))},SANDTANK_SATURATION_UPDATE:function(t,e){var n=t.state,a=e.array,i=e.time;n.time=i,Ie(a).then((function(t){n.saturationArray=new Uint8Array(t)}))},SANDTANK_CONCENTRATION_UPDATE:function(t,e){var n=t.state,a=e.array,i=e.range;n.concentrationDataRange=i,a?Ie(a).then((function(t){n.concentrationArray=new Float32Array(t)})):n.concentrationArray=null},SANDTANK_PRESSURES_UPDATE:function(t,e){var n=t.state;n.pressures=e},SANDTANK_FLOWS_UPDATE:function(t,e){var n=t.state;n.flows=e},SANDTANK_STORAGES_UPDATE:function(t,e){var n=t.state;n.storages=e},SANDTANK_MASK_UPDATE:function(t,e){var n=t.state,a=e.scale,i=e.array;n.solidScaling=a,Ie(i).then((function(t){n.solidArray=new Uint8Array(t)}))},SANDTANK_RESET:function(){var t=Object(Re["a"])(regeneratorRuntime.mark((function t(e){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=e.commit,i=e.dispatch,n.time=0,i("PARFLOW_RESET_WELLS"),a("PARFLOW_LEFT_PRESSURE_SET",n.domain.setup.hLeft),a("PARFLOW_RIGHT_PRESSURE_SET",n.domain.setup.hRight),a("PARFLOW_RESET_SET",!0),t.abrupt("return",i("PVW_RESET"));case 7:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},Ue={state:{},getters:{},mutations:{},actions:{}};function Ke(){return new i["a"].Store({modules:{parflow:Le,pvw:Fe,sandtank:ze,ui:Ue}})}var He=Ke;window.SANDTANK_SESSION_MANAGER_URL||(window.SANDTANK_SESSION_MANAGER_URL="/paraview/"),a["default"].config.productionTip=!1,a["default"].use(i["a"]),a["default"].use(s.a);var Be=He();Ne.register(Be),new a["default"]({vuetify:new s.a(Pe),store:Be,render:function(t){return t(Se)},beforeDestroy:Ne.unregister}).$mount("#app")},"606a":function(t,e,n){t.exports={field:"style_field_1U-2_"}},7301:function(t,e,n){t.exports={text:"style_text_1cCMY",bg:"style_bg_2C5l_ style_text_1cCMY",table:"style_table_8iweY",small:"style_small_3GBmg style_text_1cCMY",slider:"style_slider_1bzio",clay:"style_clay_2J5Hb style_bg_2C5l_ style_text_1cCMY",gravel:"style_gravel_11SPx style_bg_2C5l_ style_text_1cCMY",loam:"style_loam_331CH style_bg_2C5l_ style_text_1cCMY",sand:"style_sand_3kYE0 style_bg_2C5l_ style_text_1cCMY",txtBg:"style_txtBg_a4mif"}},"8c3d":function(t,e,n){"use strict";var a=n("606a"),i=n.n(a);e["default"]=i.a},"92fd":function(t,e,n){"use strict";var a=n("e102"),i=n.n(a);e["default"]=i.a},"9d19":function(t,e,n){t.exports=n.p+"img/logo-arizona.df77526f.png"},a56b:function(t,e,n){t.exports={aboutIcon:"style_aboutIcon_2SvJi",logoIcon:"style_logoIcon_2fpxE",list:"style_list_1jucz",logoLine:"style_logoLine_2pz8r",logo:"style_logo_3gdO-"}},a7ca:function(t,e,n){"use strict";var a=n("32b7"),i=n.n(a);e["default"]=i.a},b51b:function(t,e,n){t.exports={flux:"style_flux_3kf_H"}},ba7e:function(t,e,n){t.exports=n.p+"img/loam.acc6b392.jpg"},e102:function(t,e,n){t.exports={container:"style_container_36pQm",canvas:"style_canvas_1Ejnr",material:"style_material_16H8X style_canvas_1Ejnr",water:"style_water_1LqDG style_canvas_1Ejnr",pollutant:"style_pollutant_3Qk0K style_canvas_1Ejnr",wells:"style_wells_SZXWv",stillWater:"style_stillWater_Z3hbg",wellControl:"style_wellControl_23AZ7"}},ef4d:function(t,e,n){t.exports=n.p+"img/logo-kitware.6f75f40a.svg"}});
//# sourceMappingURL=app.80a9028d.js.map